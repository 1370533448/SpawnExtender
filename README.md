# SpawnExtender - CS2出生点扩展插件

## 简介
SpawnExtender是一款专为Counter-Strike 2服务器设计的实用工具，能够动态增加地图的出生点数量，有效解决部分地图出生点不足导致玩家无法加入队伍的问题。

通过智能分析现有出生点并在其附近创建额外的出生点实体，SpawnExtender确保所有玩家都能顺利加入游戏，特别适用于人数较多的服务器。

## 主要特性
- **自动出生点创建**：在地图加载时自动检测并添加所需数量的T和CT出生点
- **智能位置计算**：基于现有出生点位置智能计算新出生点位置，避免重叠或卡位
- **动态调整**：根据服务器最大玩家数量自动计算所需出生点数量
- **手动控制**：支持通过命令手动添加或清除额外出生点
- **地图变更检测**：地图变更时自动清除并重新创建出生点
- **调试模式**：内置调试功能，便于服务器管理员排查问题
- **安全稳定**：代码经过优化，不影响服务器性能

## 使用场景
SpawnExtender插件特别适用于以下场景：
- 大型公共服务器（16人以上）
- 使用出生点数量较少的地图
- 经常遇到玩家无法加入队伍的服务器
- 需要平衡队伍人数的服务器

## 安装方法
1. 确保您的服务器已安装**CounterStrikeSharp**框架
2. 将编译好的插件文件复制到服务器的`csgo/addons/counterstrikesharp/plugins/SpawnExtender`目录
3. 重启服务器或使用`css_plugins_reload`命令重新加载插件
4. 插件将自动运行，无需额外配置

## 命令系统
SpawnExtender提供了几个实用的管理命令：

- `css_spawns_add [T数量] [CT数量]` - 手动添加指定数量的T和CT出生点
  - 例如：`css_spawns_add 10 15`添加10个T出生点和15个CT出生点
- `css_spawns_clear` - 清除所有额外添加的出生点
- `css_spawns_debug` - 切换调试模式，用于排查问题

## 工作原理
SpawnExtender插件通过以下步骤扩展地图出生点：

1. 在地图加载和回合开始时，插件自动检测现有出生点数量
2. 根据服务器最大玩家数计算每个队伍所需的出生点数量（通常为最大玩家数的一半加2个缓冲）
3. 如果现有出生点不足，插件会在原有出生点附近创建额外的出生点实体
4. 新创建的出生点保持与原始出生点相同的功能和朝向
5. 地图变更或服务器重启时，插件会自动清除之前创建的出生点并根据新地图重新创建

## 技术细节
- 插件使用CounterStrikeSharp API创建实体
- 新出生点在现有出生点附近创建，默认间距为50个单位
- 每个新出生点都经过位置验证，确保不会被卡在墙内或无效位置
- 插件会保存所有创建的实体引用，以便在需要时清除
- 插件监控出生点数量变化，在检测到异常时自动重新创建

## 常见问题解答
### 问：插件是否会永久修改地图文件？
答：不会。所有创建的出生点都是临时的，只在当前服务器会话中有效，不会修改地图文件。

### 问：如何知道插件是否正常工作？
答：启用调试模式（`css_spawns_debug`），插件会在控制台输出详细的操作日志。另外，如果玩家之前无法加入队伍，现在可以正常加入，说明插件正常工作。

### 问：是否需要为每个地图单独配置？
答：不需要。插件会自动检测每个地图的出生点数量并根据需要添加额外出生点。

### 问：插件会影响服务器性能吗？
答：不会。插件只在地图加载和回合开始时进行短暂的处理，不会持续占用服务器资源。

## 注意事项
- 插件创建的出生点在地图变更或服务器重启后会自动清除
- 对于某些特殊地图，可能需要手动调整出生点数量
- 如果遇到问题，可以使用`css_spawns_debug`命令开启调试模式查看详细日志
- 插件不会修改地图文件，所有更改都是临时的，只在当前会话中有效

## 编译方法
如果你想自己编译插件，请确保你的系统已安装.NET 8.0 SDK，然后执行：
```bash
dotnet build
```

## 版本历史
- 1.0.0
  - 初始版本发布
  - 支持自动和手动创建出生点
  - 添加调试功能
  - 实现地图变更检测

## 贡献
欢迎提交问题报告和功能建议。如果您想为项目做出贡献，请提交PR。
